<app-loader *ngIf="loading"></app-loader>

<form data-component="contact-form" [formGroup]="contactForm" (ngSubmit)="onSubmitContactForm()">
  <app-alert status="success" [dismissible]="true" (dismissAlert)="onClearSuccessMessage()" *ngIf="contactFormSuccessMessage">
    {{ contactFormSuccessMessage }}
  </app-alert>

  <div class="form-row">
    <div class="col">
      <div class="form-group">
        <label for="first-name">First name</label>
        <input id="first-name" [ngClass]="{ 'form-control': true, 'is-invalid': contactForm.get('firstName').touched && contactForm.get('firstName').invalid }" type="text" formControlName="firstName" placeholder="First name" />

        <ng-template [ngIf]="contactForm.get('firstName').touched && contactForm.get('firstName').errors">
          <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('firstName').errors.required }">First name is required</div>
          <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('firstName').errors.minlength }">Minimum 3 characters required</div>
        </ng-template>
      </div>
    </div>

    <div class="col">
      <div class="form-group">
        <label for="last-name">Last name</label>
        <input id="last-name" [ngClass]="{ 'form-control': true, 'is-invalid': contactForm.get('lastName').touched && contactForm.get('lastName').invalid }" type="text" formControlName="lastName" placeholder="Last name" />

        <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('lastName').touched && contactForm.get('lastName').invalid }">Last name is required</div>
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="col">
      <div class="form-group">
        <label for="email">E-mail</label>
        <input id="email" [ngClass]="{ 'form-control': true, 'is-invalid': contactForm.get('email').touched && contactForm.get('email').invalid }" type="email" formControlName="email" placeholder="E-mail" />

        <ng-template [ngIf]="contactForm.get('email').touched && contactForm.get('email').errors">
          <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('email').errors.required }">E-mail is required</div>
          <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('email').errors.email }">Invalid e-mail</div>
        </ng-template>
      </div>
    </div>

    <div class="col">
      <div class="form-group">
        <label for="telephone">Telephone</label>
        <input id="telephone" [ngClass]="{ 'form-control telephone-mask': true, 'is-invalid': contactForm.get('telephone').touched && contactForm.get('telephone').invalid }" type="tel" formControlName="telephone" placeholder="(00) 0000 0000" />

        <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('telephone').touched && contactForm.get('telephone').invalid }">Telephone is required</div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="pretty p-default p-round">
      <input type="radio" formControlName="sex" value="male" />
      <div class="state p-primary">
        <label>Male</label>
      </div>
    </div>

    <div class="pretty p-default p-round">
      <input type="radio" formControlName="sex" value="female" />
      <div class="state p-primary">
        <label>Female</label>
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="col">
      <div class="form-group">
        <label for="favorite-color">Favorite color</label>
        <select id="favorite-color" class="form-control" formControlName="favoriteColors">
          <option value="select" disabled>Select</option>
          <option value="{{ favoriteColor }}" *ngFor="let favoriteColor of favoriteColors">{{ favoriteColor }}</option>
        </select>

        <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('favoriteColors').touched && contactForm.get('favoriteColors').value === 'select' }">Favorite color is required</div>
      </div>
    </div>

    <div class="col mt-4">
      <div class="pretty p-svg p-curve">
        <input type="checkbox" formControlName="employed" />
        <div class="state p-primary">
          <svg class="svg svg-icon" viewBox="0 0 20 20">
            <path d="M7.629,14.566c0.125,0.125,0.291,0.188,0.456,0.188c0.164,0,0.329-0.062,0.456-0.188l8.219-8.221c0.252-0.252,0.252-0.659,0-0.911c-0.252-0.252-0.659-0.252-0.911,0l-7.764,7.763L4.152,9.267c-0.252-0.251-0.66-0.251-0.911,0c-0.252,0.252-0.252,0.66,0,0.911L7.629,14.566z" style="stroke: #FFF; fill: #FFF;"></path>
          </svg>
          <label>Employed</label>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="message">Message</label>
    <textarea id="message" [ngClass]="{ 'form-control': true, 'is-invalid': contactForm.get('message').touched && contactForm.get('message').invalid }" rows="3" formControlName="message"></textarea>

    <div [ngClass]="{ 'invalid-feedback': true, 'd-block': contactForm.get('message').touched && contactForm.get('message').invalid }">Message is required</div>
  </div>

  <button class="btn btn-primary mr-2" type="submit" [disabled]="!contactForm.valid || contactForm.pristine || contactForm.get('favoriteColors').value === 'select'">Send</button>
  <button class="btn btn-light" type="button" [disabled]="contactForm.pristine" (click)="onResetContactForm()">Reset form</button>
</form>
